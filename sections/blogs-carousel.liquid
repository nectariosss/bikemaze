{%style%}

  .left-arrow {
    display: flex;
    transform: rotate(180deg);
  }

  .blog-rotator {
    display: flex;
    flex-direction: row;
  }

  .blog-display-images {
    display: none
  }

  .blog-display-images.display {
    display: block;
  }

{%endstyle%}

<span class="left-arrow" id="left-arrow">
  {%- render 'icon-carousel-arrow' -%}
</span>
<div class="blog-rotator">
  <img id="left-arrow" src=""/>
    {%for blog in blogs.news.articles%}
      <div class="blog-display-images">
        <h2>{{blog.title}}</h2>
        <a href="{{blog.url}}">
          <img
          id="{{blog.id}}"
          src="{{blog.image | img_url: 'master'}}">
        </a>
      </div>
    {%endfor%}
</div>
  <span class="right-arrow" id="right-arrow">
    {%- render 'icon-carousel-arrow' -%}
  </span>



<script>
  const rightArrow = document.getElementById('right-arrow');
  const leftArrow = document.getElementById('left-arrow');
  const imagesList = document.getElementsByClassName('blog-display-images');
  imagesList[0].classList.add('display');
  rightArrow.addEventListener('click',()=>{rotator("right")});
  leftArrow.addEventListener('click',()=>{rotator("left")});

  function rotator(direction) {
    const imagesList = document.getElementsByClassName('blog-display-images');
    const currentDisplay = document.getElementsByClassName('blog-display-images display');
    let displayIndex = 0;

    for (let i = 0; i < imagesList.length; i++) {
      if (currentDisplay[0].classList === imagesList[i].classList) {
        displayIndex = i
      }
    }

    if (direction === 'right') {
      let nextDisplayIndex = displayIndex + 1;
      if (nextDisplayIndex === (imagesList.length )) {
        nextDisplayIndex = 0;
      }
      imagesList[displayIndex].classList.remove('display');
      imagesList[nextDisplayIndex].classList.add('display');
    };

    if (direction === 'left') {
      let nextDisplayIndex = displayIndex + - 1;
      if (nextDisplayIndex < 0) {
        nextDisplayIndex = (imagesList.length-1);
      }
      imagesList[displayIndex].classList.remove('display');
      imagesList[nextDisplayIndex].classList.add('display');
    };
    
  };

</script>

{% comment %}
{
  "name": "Blogs Carousel",
  "class": "products-carousel",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "carousel_title",
      "label": "Title",
      "default": "New arrivals"
    },
    {
      "type": "range",
      "min": 4,
      "max": 20,
      "step": 1,
      "id": "carousel_coll_lm",
      "label": "Products Quantity",
      "default": 15
    },
    {
      "type": "number",
      "id": "carousel_desk",
      "label": "Desktop Carousel Visible Items #",
      "default": 4
    },
    {
      "type": "number",
      "id": "carousel_mob",
      "label": "Mobile Carousel Visible Items #",
      "default": 2
    },
    {
      "type": "text",
      "id": "carousel_b_text",
      "label": "Button Text",
      "default": "Shop Now"
    }
  ],
  "presets": [
    {
      "name": "Blogs Carousel",
      "category": "Home Page"
    }
  ]
}
{% endcomment %}
